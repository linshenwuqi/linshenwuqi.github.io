<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>05数据库之数据完整性</title>
    <link href="/2020/06/26/05%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7/"/>
    <url>/2020/06/26/05%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<p>（1）创建一个名为“Test_Integrity_姓名首字母缩写”的数据库。<br> <img src="https://img-blog.csdnimg.cn/20200626094736431.jpg" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>（2）用命令方式在数据库中创建student表,course表和sc表，注意其中的约束按如下方式进行定义：ssex字段定义为表级约束，grade字段定义为列级约束，并为其定义一个约束名，其它的约束自己决定定义方式。<br>表结构如下：<br>Student（学生信息表）：<br>| 码  | 列名    | 数据类型     | 宽度 | 空否 | 取值范围       | 备  注 |<br>|—-|——-|———-|—-|—-|————|——|<br>| 主码 | sno   | char     | 9  | N  |            | 学号   |<br>|    | sname | char     | 10 | N  | UNIQUE     | 姓名   |<br>|    | ssex  | char     | 8  | Y  | 只能取‘男’或‘女’ | 性别   |<br>|    | sage  | smallint |    | Y  |            | 年龄   |<br>|    | sdept | char     | 10 | Y  |            | 系名   |</p><p>Course（课程表）：</p><table><thead><tr><th>码</th><th>列名</th><th>数据类型</th><th>宽度</th><th>空否</th><th>备  注</th></tr></thead><tbody><tr><td>主码</td><td>cno</td><td>Char</td><td>4</td><td>N</td><td>课程号</td></tr><tr><td></td><td>cname</td><td>Char</td><td>20</td><td>N</td><td>课程名称</td></tr><tr><td>外码</td><td>cpno</td><td>Char</td><td>4</td><td>Y</td><td>先行课号</td></tr><tr><td></td><td>ccredit</td><td>smallint</td><td></td><td>Y</td><td>学分</td></tr></tbody></table><p>SC（学生选课表）：<br>| 码  | 列名    | 数据类型     | 宽度 | 空否 | 是否外码 | 参照关系    | 取值范围    | 备  注 |<br>|—-|——-|———-|—-|—-|——|———|———|——|<br>| 主码 | sno   | Char     | 9  | N  | 外码   | student |         | 学号   |<br>|    | cno   | Char     | 4  | N  | 外码   | course  |         | 课程号  |<br>|    | grade | smallint |    | Y  |      |         | 0≤x≤100 | 成绩   |</p><p><img src="https://img-blog.csdnimg.cn/20200626100641667.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"></p><p>（3）向student表插入姓名列为“李晨”，其它列为空的学生记录，查看是否能够插入成功，若不能请分析原因。<br> <img src="https://img-blog.csdnimg.cn/20200626100659218.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>不能插入的原因是在Student表中，Sno为主键，不能为空。<br>（4）向student表分别插入学号相同的两个学生记录，姓名任意（不重名），若不能插入成功，请分析原因。<br> <img src="https://img-blog.csdnimg.cn/20200626100709206.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>不能插入的原因是在Student表中，Sno为主键，不能重复。违反了约束条件。<br>（5）向student表分别插入学号不同，姓名相同的两个学生信息时，查看发生的情况。<br> <img src="https://img-blog.csdnimg.cn/20200626100724266.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>第一条语句插入成功，第二条语句插入失败。在Student表中，Sname限定是唯一，因此不能插入。<br>（6）向student表插入信息（“01”，“刘生”，“未知”，20，“IS”），查看是否能够插入成功，若不能请分析原因。<br> <img src="https://img-blog.csdnimg.cn/20200626100732535.jpg" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>插入失败的原因是在Student约束条件中，Ssex表级约束为‘男’或‘女’，此处为‘未知’，因此插入失败。<br>（7）使用Alter Table语句修改表student,增加对sage字段的check约束，使得列的值“不小于12”，输入学号为01，姓名为“刘生”的信息，当插入该学生的sage列分别为11，12时查看发生什么情况，并分析原因。<br> <img src="https://img-blog.csdnimg.cn/20200626100738384.jpg" srcset="/img/loading.gif" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20200626100748873.jpg" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>年龄11不满足约束条件，不能插入。<br> <img src="https://img-blog.csdnimg.cn/20200626100754145.jpg" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>年龄12可以插入。<br>（8）修改sc表中对于grade列的约束，将其改为grade在0到150之间。<br> <img src="https://img-blog.csdnimg.cn/20200626100802760.jpg" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>（9）向course表插入元组（“01”，“数据库”，“05”，3）时，查看是否能够正常插入，如不能请分析原因。<br> <img src="https://img-blog.csdnimg.cn/20200626100806851.jpg" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>由于Student中的Sno的唯一性约束，Sno = 01在表中已经出现过，因此插入失败。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>06数据库之触发器</title>
    <link href="/2020/06/26/06%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E8%A7%A6%E5%8F%91%E5%99%A8/"/>
    <url>/2020/06/26/06%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E8%A7%A6%E5%8F%91%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<p><strong><em>在数据库Student_DB_SJW中做如下操作：</em></strong><br>（1）    查询学号为201215121的姓名和所选修的课程门数，当门数为2门及以上时，则输出“XX,已经完成了选课”，否则输出“XX，还需选课”。（提示：需定义变量存储选修的课程门数和学生姓名）</p><pre><code class="hljs sql"><span class="hljs-keyword">use</span> Student_DB_SJW<span class="hljs-keyword">begin</span><span class="hljs-keyword">declare</span> @sname <span class="hljs-built_in">char</span>(<span class="hljs-number">10</span>),@<span class="hljs-keyword">num</span> <span class="hljs-built_in">int</span><span class="hljs-keyword">select</span> @sname=Student.Sname,@<span class="hljs-keyword">num</span>=<span class="hljs-keyword">COUNT</span>(Cno)<span class="hljs-keyword">from</span> Student,SC<span class="hljs-keyword">where</span> Student.Sno=SC.Sno <span class="hljs-keyword">and</span> Student.Sno=<span class="hljs-string">'201215121'</span><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> Sname<span class="hljs-keyword">if</span>(@<span class="hljs-keyword">num</span>&gt;=<span class="hljs-number">2</span>)print @sname+<span class="hljs-string">',已经完成选课'</span><span class="hljs-keyword">else</span> print @sname+<span class="hljs-string">',还需选课'</span><span class="hljs-keyword">End</span></code></pre><p> <img src="https://img-blog.csdnimg.cn/20200626101409669.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>（2）    在数据库中查找姓名为“张立”的学生，若找到，输出该学生的学号，姓名，年龄，院系，否则，输出“查无此人”的信息。（提示：用if exists）</p><pre><code class="hljs sql"><span class="hljs-keyword">begin</span><span class="hljs-keyword">if</span> <span class="hljs-keyword">exists</span>(<span class="hljs-keyword">select</span> Sno,Sname,Sage,Sdept<span class="hljs-keyword">from</span> Student <span class="hljs-keyword">where</span> Sname=<span class="hljs-string">'张立'</span>)<span class="hljs-keyword">select</span> Sno,Sname,Sage,Sdept<span class="hljs-keyword">from</span> Student <span class="hljs-keyword">where</span> Sname=<span class="hljs-string">'张立'</span><span class="hljs-keyword">else</span>print <span class="hljs-string">'查无此人'</span><span class="hljs-keyword">end</span></code></pre><p><img src="https://img-blog.csdnimg.cn/20200626101446601.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"></p><p>（3）    在Student表上创建一个触发器，每次有插入操作时，都设置变量@str的值为”Trigger is working”，并输出显示出来。<br>创建触发器：</p><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> tril <span class="hljs-keyword">on</span> student<span class="hljs-keyword">after</span> <span class="hljs-keyword">insert</span><span class="hljs-keyword">as</span><span class="hljs-keyword">begin</span><span class="hljs-keyword">declare</span> @<span class="hljs-keyword">str</span> <span class="hljs-built_in">char</span>(<span class="hljs-number">20</span>)<span class="hljs-keyword">set</span> @<span class="hljs-keyword">str</span>=<span class="hljs-string">'Trigger is working'</span>print @<span class="hljs-keyword">str</span><span class="hljs-keyword">end</span></code></pre><p><img src="https://img-blog.csdnimg.cn/20200626101522253.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"></p><p>测试触发器：<br> <img src="https://img-blog.csdnimg.cn/20200626101530356.jpg" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>（4）    按课本P166页的方式创建TEACHER表（在此之前需创建DEPT表）。并在此教师表中定义一个AFTER触发器，为教师表Teacher定义完整性规则“教授的工资不得低于4000元，如果低于4000元，自动改为4000元”。并进行触发器的验证。</p><p>创建表：</p><p><img src="https://img-blog.csdnimg.cn/20200626101553258.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>创建触发器：<br> <img src="https://img-blog.csdnimg.cn/20200626101603351.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>验证：<br> <img src="https://img-blog.csdnimg.cn/20200626101609383.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20200626101612872.jpg" srcset="/img/loading.gif" alt="在这里插入图片描述"></p><p>（5）    首先解除Student表和SC表的参照关系。然后在Student表上创建一个触发器，使更新一个学生的学号信息时能够级联的更新此学生在SC表中的选课记录的学号信息，并进行验证。<br> <img src="https://img-blog.csdnimg.cn/20200626101619386.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20200626101623818.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20200626101626886.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>查看结果：<br> <img src="https://img-blog.csdnimg.cn/20200626101637237.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>（6）    首先解除Student表和SC表的参照关系。然后在Student表上创建一个触发器，使删除一个学生时能够级联的删除此学生在SC表中的选课记录，并进行验证。<br> <img src="https://img-blog.csdnimg.cn/20200626101642586.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20200626101646204.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20200626101649971.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>07数据库设计（概念结构、逻辑结构）</title>
    <link href="/2020/06/26/07%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%EF%BC%88%E6%A6%82%E5%BF%B5%E7%BB%93%E6%9E%84%E3%80%81%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%EF%BC%89/"/>
    <url>/2020/06/26/07%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%EF%BC%88%E6%A6%82%E5%BF%B5%E7%BB%93%E6%9E%84%E3%80%81%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p><strong>某学院有基本实体集：系、教师、学生和课程。各个实体的属性集为：</strong><br>系：系编号，系名，地址<br>课程：课程号，课程名称，开课学期<br>学生：学号，学生姓名，性别，住址<br>教师：教工号，教师姓名，办公室</p><p><strong>实体间的联系有：</strong><br>每个系有一位系主任，有多位教师；一个教师只能在一个系任职；每个系开设多门不同课程；一门    课程只能由一个系负责开设；每门课程只能由一个教师授课，一个教师可以讲授多门课程；一个学生可以选修多门课程；一门课程也可以由多个学生选修。</p><p><strong>请根据以上需求完成如下操作：</strong><br>（1）    对以上描述进行分析，进行数据库概念模型的设计（即确定各个实体、属性及联系并绘制E-R图）。<br>绘制E-R图如下所示：<br><img src="https://img-blog.csdnimg.cn/20200626172812876.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_5pys5paH5Y6f5Yib5L2c6ICF77ya54ix5a2m5Lmg55qEY2F0ICAgIA==,size_24,color_000000,t_70#pic_center" srcset="/img/loading.gif" alt="在这里插入图片描述"><br>（2）    将（1）中概念模型转换成关系型逻辑模型，并标出各个关系模式的主码和外码。</p><p>系：（系编号，系名，地址，系主任）<br>教师：（教工号，教师姓名，办公室，系编号）<br>课程：（课程号，课程名称，开课学期，系编号，教工号）<br>学生：（学号，姓名，性别，住址，系编号）<br>选修：（学号<em>，课程号</em>）</p><p><strong>注：加*的为外码，加下划线的为主码。</strong><br>（3）    将所转换成的关系型数据模型在SQL Server中进行实现。<br><img src="https://img-blog.csdnimg.cn/2020062617295266.png" srcset="/img/loading.gif" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/2020062617413066.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTcxMzk4NA==,size_16,color_FFFFFF,t_70" srcset="/img/loading.gif" alt="在这里插入图片描述"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>我的第一个博客</title>
    <link href="/2020/06/16/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2/"/>
    <url>/2020/06/16/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<p>此博客仅用来进行测试文档</p>]]></content>
    
    
    
    <tags>
      
      <tag>first</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>My first blog</title>
    <link href="/2020/06/15/My%20first%20blog/"/>
    <url>/2020/06/15/My%20first%20blog/</url>
    
    <content type="html"><![CDATA[<p>你好世界！</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2020/06/15/hello-world/"/>
    <url>/2020/06/15/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="hljs bash">$ hexo new <span class="hljs-string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="hljs bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="hljs bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="hljs bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
